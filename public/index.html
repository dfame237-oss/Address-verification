<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Address Verification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Re-use your color palette for consistency
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#1D4ED8', // Dark Blue
                        'secondary-green': '#059669', // Dark Green
                        'neutral-gray': '#E5E7EB',
                        'accent-yellow': '#FCD34D', // A nice accent for the bulk button
                        'whatsapp-green': '#25D366', // Added WhatsApp Green
                    },
                    fontFamily: {
                        // Ensure consistent font
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-neutral-gray min-h-screen flex items-center justify-center p-4">
    
    <div class="w-full max-w-lg bg-white p-8 sm:p-10 rounded-xl shadow-2xl border border-gray-100">

        <header class="header text-center mb-8">
            <h1 class="text-4xl font-extrabold text-gray-900 mb-2">
                <span class="text-primary-blue">AI Address</span> Verification
            </h1>
            <p class="text-lg text-gray-500 mt-2">Choose a method to clean, normalize, and verify addresses using advanced AI.</p>
        </header>
        
        <div class="options-container space-y-6 mt-8">
            
            <a href="single.html" class="block w-full text-center py-4 px-6 bg-secondary-green text-white font-bold text-xl rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] hover:bg-green-700 focus:outline-none focus:ring-4 focus:ring-secondary-green focus:ring-opacity-50">
                <span class="mr-2">üìù</span> Verify Single Address
            </a>
            
            <button id="bulkVerificationButton" class="block w-full text-center py-4 px-6 bg-accent-yellow text-gray-900 font-bold text-xl rounded-lg shadow-md transition duration-300 transform hover:scale-[1.02] hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-accent-yellow focus:ring-opacity-50">
                <span class="mr-2">üì¶</span> Bulk Address Verification
            </button>
            
            <a href="https://wa.me/9193246219" target="_blank" class="block w-full text-center py-3 px-6 bg-whatsapp-green text-white font-semibold rounded-lg shadow-md transition duration-300 transform hover:scale-[1.01] hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-whatsapp-green focus:ring-opacity-50">
                <span class="mr-2">üìû</span> Get Access Code / WhatsApp Support
            </a>
        </div>
        
        <p class="text-center mt-8 text-sm text-gray-500 border-t pt-4">
            The bulk verification process is handled directly in your browser to maintain **data privacy** and speed.
        </p>
    </div>
    
    <script>
        // Set the Vercel API endpoint for the server-side access check
        const ACCESS_API_ENDPOINT = "https://address-verification-app.vercel.app/api/check-access";
        const BULK_PAGE_URL = "bulk.html";
        
        document.getElementById('bulkVerificationButton').addEventListener('click', async function() {
            // Prompt the user for the access code
            const userInput = prompt("Please enter the access code for Bulk Address Verification:");
            
            if (userInput === null) {
                return;
            }
            
            const userCode = userInput.trim();
            if (userCode === "") {
                alert("Access code cannot be empty.");
                return;
            }

            // Call the Serverless API to check the code
            try {
                const response = await fetch(ACCESS_API_ENDPOINT, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ code: userCode })
                });
                
                const result = await response.json();

                if (response.ok && result.status === "Success") {
                    // SUCCESS: Redirect to the bulk page
                    window.location.href = BULK_PAGE_URL;
                } else {
                    // FAILURE: Show error message from the server
                    alert("Incorrect access code. Please contact support via WhatsApp to get the code.");
                }
            } catch (e) {
                console.error("API Fetch Error:", e);
                // This catch handles network errors or CORS issues
                alert("A network error occurred while checking access. Please ensure the server (Vercel) is running and check console for details.");
            }
        });
    </script>
</body>
</html>
